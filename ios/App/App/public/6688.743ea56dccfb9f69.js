"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6688],{6688:(I,d,a)=>{a.r(d),a.d(d,{LoginPageModule:()=>G});var m=a(2200),g=a(4341),c=a(9893),p=a(8132),f=a(467),n=a(3664),h=a(5032),_=a(1562),b=a(4030);function v(e,o){1&e&&(n.j41(0,"div"),n.EFF(1,"Email is required."),n.k0s())}function P(e,o){1&e&&(n.j41(0,"div"),n.EFF(1,"Enter a valid email address."),n.k0s())}function x(e,o){if(1&e&&(n.j41(0,"div",15),n.DNE(1,v,2,0,"div",16)(2,P,2,0,"div",16),n.k0s()),2&e){const l=n.XpG();n.R7$(),n.Y8G("ngIf",l.f.username.errors.required),n.R7$(),n.Y8G("ngIf",l.f.username.errors.email)}}function w(e,o){1&e&&(n.j41(0,"div"),n.EFF(1,"Password is required."),n.k0s())}function k(e,o){1&e&&(n.j41(0,"div"),n.EFF(1,"Password must be at least 6 characters."),n.k0s())}function C(e,o){if(1&e&&(n.j41(0,"div",15),n.DNE(1,w,2,0,"div",16)(2,k,2,0,"div",16),n.k0s()),2&e){const l=n.XpG();n.R7$(),n.Y8G("ngIf",l.f.password.errors.required),n.R7$(),n.Y8G("ngIf",l.f.password.errors.minlength)}}function y(e,o){if(1&e&&(n.j41(0,"div",17)(1,"p",18),n.EFF(2),n.k0s()()),2&e){const l=n.XpG();n.R7$(2),n.JRh(l.error_message)}}let M=(()=>{var e;class o{constructor(r,i,t,s){this.fb=r,this.navCtrl=i,this.router=t,this.db=s,this.showPassword=!1,this.submitted=!1}ngOnInit(){this.loginForm=this.fb.group({username:["",[g.k0.required,g.k0.email]],password:["",[g.k0.required]]})}get f(){return this.loginForm.controls}togglePassword(){this.showPassword=!this.showPassword}onSubmit(){this.submitted=!0,this.loginForm.invalid?this.loginForm.markAllAsTouched():(console.log("Login payload",this.loginForm.value),this.login())}login(){var r=this;this.db.login({username:this.loginForm.value.username,password:this.loginForm.value.password}).subscribe(function(){var t=(0,f.A)(function*(s){s&&"Success"==s.status&&s.message?(r.error_message="",r.submitted=!1,localStorage.token=`token ${s.message.api_key}:${s.message.api_secret}`,localStorage.username=s.message.username,localStorage.pos_profile=s.message.pos_profile,r.openingPosEntry(),r.db.header_content.store_name=s.message.pos_profile):r.error_message=s.message.message});return function(s){return t.apply(this,arguments)}}())}openingPosEntry(){let r={user:localStorage.username};this.db.pos_opening_entry(r).subscribe(i=>{i&&i.message&&"Success"==i.status?(this.loginForm.reset(),this.router.navigateByUrl("/tabs/sales"),this.db.presentToast("Login Successful","success")):this.db.presentToast(i.message.message,"error")})}static#n=e=()=>(this.\u0275fac=function(i){return new(i||o)(n.rXU(g.ok),n.rXU(h.q9),n.rXU(_.Ix),n.rXU(b.Db))},this.\u0275cmp=n.VBU({type:o,selectors:[["app-login"]],standalone:!1,decls:18,vars:8,consts:[[1,"login-bg",3,"fullscreen"],[1,"login-wrap"],[1,"logo_icon"],["src","/assets/icon/logo.png","alt",""],[1,"form-card",3,"formGroup"],[1,"form-item"],["name","person-outline",1,"person_icon"],["formControlName","username","type","email","inputmode","email","placeholder","Email address",3,"keydown.enter"],["class","error",4,"ngIf"],[1,"password_icon",3,"name"],["formControlName","password","placeholder","Password",3,"keydown.enter","type"],["fill","clear","type","button","aria-label","Toggle password",1,"eye-btn",3,"click"],[3,"name"],["expand","block","type","submit",1,"submit-btn",3,"click"],["class","error_message",4,"ngIf"],[1,"error"],[4,"ngIf"],[1,"error_message"],[1,"m-0"]],template:function(i,t){1&i&&(n.j41(0,"ion-content",0)(1,"div",1)(2,"div",2),n.nrm(3,"img",3),n.k0s(),n.j41(4,"form",4)(5,"div",5),n.nrm(6,"ion-icon",6),n.j41(7,"ion-input",7),n.bIt("keydown.enter",function(){return t.onSubmit()}),n.k0s()(),n.DNE(8,x,3,2,"div",8),n.j41(9,"div",5),n.nrm(10,"ion-icon",9),n.j41(11,"ion-input",10),n.bIt("keydown.enter",function(){return t.onSubmit()}),n.k0s(),n.j41(12,"ion-button",11),n.bIt("click",function(){return t.togglePassword()}),n.nrm(13,"ion-icon",12),n.k0s()(),n.DNE(14,C,3,2,"div",8),n.j41(15,"ion-button",13),n.bIt("click",function(){return t.onSubmit()}),n.EFF(16,"Sign In"),n.k0s(),n.DNE(17,y,3,1,"div",14),n.k0s()()()),2&i&&(n.Y8G("fullscreen",!0),n.R7$(4),n.Y8G("formGroup",t.loginForm),n.R7$(4),n.Y8G("ngIf",t.f.username.touched&&t.submitted&&t.f.username.errors),n.R7$(2),n.Y8G("name",t.showPassword?"lock-open-outline":"lock-closed-outline"),n.R7$(),n.Y8G("type",t.showPassword?"text":"password"),n.R7$(2),n.Y8G("name",t.showPassword?"eye-off":"eye"),n.R7$(),n.Y8G("ngIf",t.f.password.touched&&t.submitted&&t.f.password.errors),n.R7$(3),n.Y8G("ngIf",t.error_message))},dependencies:[m.bT,g.qT,g.BC,g.cb,c.Jm,c.W9,c.iq,c.$w,c.Gw,g.j4,g.JD],styles:["[_nghost-%COMP%]   ion-content.login-bg[_ngcontent-%COMP%]{--background: #ffffff}.login-wrap[_ngcontent-%COMP%]{max-width:420px;margin:6vh auto;padding:10px;display:flex;flex-direction:column;align-items:center;height:calc(100vh - 25px);justify-content:center}.brand[_ngcontent-%COMP%]{font-size:48px;font-weight:700;color:#22295e;letter-spacing:1px;margin-bottom:6px}.title[_ngcontent-%COMP%]{color:#22295e;font-size:18px;margin:0 0 18px;font-weight:600;text-align:center}.form-card[_ngcontent-%COMP%]{width:100%;background:#fff;border-radius:8px}.form-item[_ngcontent-%COMP%]{--inner-padding-end: 8px;margin-bottom:10px;display:flex;align-items:center;border:1px solid var(--border-col);border-radius:7px}.form-item[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background: unset !important}.form-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{font-size:14px}.form-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:20px}.form-item[_ngcontent-%COMP%]   .person_icon[_ngcontent-%COMP%], .form-item[_ngcontent-%COMP%]   .password_icon[_ngcontent-%COMP%]{padding:10px;border-right:1px solid var(--border-col);margin-right:10px;flex:0 0 20px}ion-icon[_ngcontent-%COMP%]{color:#22295e}.submit-btn[_ngcontent-%COMP%]{margin-top:12px;border-radius:6px;height:40px;--box-shadow: none}.error[_ngcontent-%COMP%]{color:#e64949;font-size:12px;margin:4px 6px 10px}@media (max-width: 420px){.login-wrap[_ngcontent-%COMP%]{margin:12px}.brand[_ngcontent-%COMP%]{font-size:40px}}.logo_icon[_ngcontent-%COMP%]{display:flex;align-items:center;width:150px;justify-content:center;margin-bottom:25px}.logo_icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;object-fit:cover}.error_message[_ngcontent-%COMP%]{margin-top:15px;padding:2px;background:#ff000047;border-radius:5px}.error_message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;font-weight:500;color:red;text-align:center}"]}))}return e(),o})();var u=a(2615);const O=[{path:"",component:M}];let F=(()=>{var e;class o{static#n=e=()=>(this.\u0275fac=function(i){return new(i||o)},this.\u0275mod=n.$C({type:o}),this.\u0275inj=u.G2t({imports:[p.iI.forChild(O),p.iI]}))}return e(),o})(),G=(()=>{var e;class o{static#n=e=()=>(this.\u0275fac=function(i){return new(i||o)},this.\u0275mod=n.$C({type:o}),this.\u0275inj=u.G2t({imports:[m.MD,g.YN,c.bv,F,g.X1]}))}return e(),o})()}}]);
"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9383],{9383:(x,p,c)=>{c.r(p),c.d(p,{TransferReceiptPageModule:()=>k});var m=c(2200),g=c(4341),_=c(9893),d=c(8132),t=c(3664),r=c(2615),u=c(1562),f=c(4030),h=c(385);function M(s,i){if(1&s&&(t.j41(0,"div",16)(1,"p",17),t.EFF(2),t.k0s(),t.j41(3,"p",18),t.EFF(4),t.k0s(),t.j41(5,"div",19)(6,"p",20),t.EFF(7),t.k0s(),t.j41(8,"p",21),t.EFF(9),t.k0s()()()),2&s){const a=t.XpG();t.R7$(2),t.JRh(a.stock_details.transfer_receipt_id),t.R7$(2),t.SpI("Date: ",a.stock_details.posting_date),t.R7$(3),t.SpI("",a.stock_details.total_items," Items"),t.R7$(2),t.JRh(a.stock_details.status)}}function P(s,i){if(1&s){const a=t.RV6();t.j41(0,"div",24)(1,"div")(2,"h3",25),t.EFF(3),t.k0s(),t.j41(4,"p",26),t.EFF(5),t.k0s()(),t.j41(6,"div",27)(7,"div",28)(8,"label"),t.EFF(9,"System Quantity"),t.k0s(),t.j41(10,"input",29),t.mxI("ngModelChange",function(n){const o=r.eBV(a).$implicit;return t.DH7(o.system_qty,n)||(o.system_qty=n),r.Njj(n)}),t.k0s()(),t.j41(11,"div",30)(12,"label"),t.EFF(13,"Physical Quantity"),t.k0s(),t.j41(14,"input",31),t.bIt("change",function(){const n=r.eBV(a).$implicit,o=t.XpG(2);return o.validateQty(n),r.Njj(o.fetch_variance(n))}),t.mxI("ngModelChange",function(n){const o=r.eBV(a).$implicit;return t.DH7(o.physical_qty,n)||(o.physical_qty=n),r.Njj(n)}),t.k0s()()(),t.j41(15,"div",32)(16,"label"),t.EFF(17,"Variance"),t.k0s(),t.j41(18,"input",33),t.mxI("ngModelChange",function(n){const o=r.eBV(a).$implicit;return t.DH7(o.variance,n)||(o.variance=n),r.Njj(n)}),t.k0s()()()}if(2&s){const a=i.$implicit;t.R7$(3),t.JRh(a.item_name),t.R7$(2),t.JRh(a.item_code),t.R7$(5),t.R50("ngModel",a.system_qty),t.R7$(4),t.R50("ngModel",a.physical_qty),t.R7$(4),t.R50("ngModel",a.variance)}}function C(s,i){if(1&s&&(t.j41(0,"div",22),t.DNE(1,P,19,5,"div",23),t.k0s()),2&s){const a=t.XpG();t.R7$(),t.Y8G("ngForOf",a.stock_entry_list)}}const O=[{path:"",component:(()=>{var s;class i{constructor(e,n,o){this.route=e,this.db=n,this.router=o,this.stock_details={id:"TRF-2025-001",from:"Main Warehouse",date:"1/15/2025",items_count:3,status:"Pending"},this.stock_entry_list=[],this.receipt_book_list=[{item_code:"Basics of Bhagavadgita-Bengali",item_name:"Basics of Bhagavadgita-Bengali",physical_qty:3},{item_code:"Basics of Bhagavadgita-Bengali",item_name:"Basics of Bhagavadgita-Bengali",physical_qty:3},{item_code:"Basics of Bhagavadgita-Bengali",item_name:"Basics of Bhagavadgita-Bengali",physical_qty:3}]}ngOnInit(){this.route.params.subscribe(e=>{console.log(e),e&&e.id&&(this.router_name=e.id),this.get_stock_entry_details()})}ionViewWillLeave(){this.stock_entry_list.length>0&&(localStorage.setItem("stock_entry_list",JSON.stringify({stock_entry_name:this.router_name,items_data:this.stock_entry_list})),this.stock_entry_list=[])}saveReceipt(){console.log("Receipt Saved"),this.db.confirm_receipt({stock_entry_name:this.router_name,items_data:this.stock_entry_list}).subscribe(n=>{console.log(n),n&&n.message&&"success"==n.message.status?(this.db.presentToast(n.message.message,"success"),this.router.navigateByUrl("/stock-receipt"),this.stock_entry_list=[],localStorage.removeItem("stock_entry_list")):this.db.presentToast(n&&n.message&&n.message.message?n.message.message:"Error in saving receipt","error")})}get_stock_entry_details(){this.db.get_stock_entry_details({stock_entry_name:this.router_name}).subscribe(n=>{if(console.log(n),n&&n.message&&n.message.data&&"success"==n.message.status){if(n.message.data.items&&n.message.data.items.length>0){this.stock_entry_list=n.message.data.items;const o=localStorage.stock_entry_list?localStorage.stock_entry_list:null;if(o){const l=JSON.parse(o);l&&l.stock_entry_name===this.router_name&&(this.stock_entry_list=l.items_data,localStorage.removeItem("stock_entry_list"),console.log("Loaded stock entry list from localStorage:",this.stock_entry_list))}}this.stock_details=n.message.data.header}else this.stock_entry_list=[]})}fetch_variance(e){e.physical_qty&&(e.variance=e.physical_qty-e.system_qty)}handleRefresh(e){setTimeout(()=>{e.target.complete(),this.get_stock_entry_details()},2e3)}validateQty(e){e.physical_qty<0&&(e.physical_qty=0,e.variance=0)}static#t=s=()=>(this.\u0275fac=function(n){return new(n||i)(t.rXU(u.nX),t.rXU(f.Db),t.rXU(u.Ix))},this.\u0275cmp=t.VBU({type:i,selectors:[["app-transfer-receipt"]],standalone:!1,decls:19,vars:9,consts:[[3,"home","title"],[2,"--background","#f6f7f9",3,"fullscreen"],["slot","fixed",3,"ionRefresh","pullFactor","pullMin","pullMax"],[1,"main_section"],[1,"stock_boxes"],[1,"boxes"],[1,"box_1"],[1,"sec_1"],["src","/assets/icon/receipt-items-pending.svg"],["class","sec_2",4,"ngIf"],["class","books_list",4,"ngIf"],[1,"save_btn"],["fill","clear",3,"click"],["name","checkmark-circle-outline",1,"white"],["fill","clear",1,"wrong_transfer",3,"routerLink"],["name","warning-outline"],[1,"sec_2"],[1,"m-0","id"],[1,"m-0","date"],[1,"count_status"],[1,"m-0","items"],[1,"m-0","status"],[1,"books_list"],["class","boxes_item",4,"ngFor","ngForOf"],[1,"boxes_item"],[1,"m-0","book_name"],[1,"m-0","sub_title"],[1,"cost_inputs","mb-10"],[1,"system_quantity"],["type","number","readonly","","placeholder","System Quantity",3,"ngModelChange","ngModel"],[1,"physical_quantity"],["type","number","placeholder","Physical Quantity",3,"change","ngModelChange","ngModel"],[1,"variance"],["type","number","readonly","","placeholder","Variance",3,"ngModelChange","ngModel"]],template:function(n,o){1&n&&(t.nrm(0,"app-header",0),t.j41(1,"ion-content",1)(2,"ion-refresher",2),t.bIt("ionRefresh",function(v){return o.handleRefresh(v)}),t.nrm(3,"ion-refresher-content"),t.k0s(),t.j41(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"div",7),t.nrm(9,"ion-icon",8),t.k0s(),t.DNE(10,M,10,4,"div",9),t.k0s()()(),t.DNE(11,C,2,1,"div",10),t.k0s(),t.j41(12,"div",11)(13,"ion-button",12),t.bIt("click",function(){return o.saveReceipt()}),t.nrm(14,"ion-icon",13),t.EFF(15,"Confirm Receipt"),t.k0s(),t.j41(16,"ion-button",14),t.nrm(17,"ion-icon",15),t.EFF(18,"Report Wrong Transfer"),t.k0s()()()),2&n&&(t.Y8G("home",!1)("title","Transfer Receipt"),t.R7$(),t.Y8G("fullscreen",!0),t.R7$(),t.Y8G("pullFactor",.5)("pullMin",100)("pullMax",200),t.R7$(8),t.Y8G("ngIf",o.stock_details),t.R7$(),t.Y8G("ngIf",o.stock_entry_list&&o.stock_entry_list.length>0),t.R7$(5),t.Y8G("routerLink","/wrong-receipt/"+o.router_name))},dependencies:[m.Sq,m.bT,g.me,g.Q0,g.BC,g.vS,_.Jm,_.W9,_.iq,_.To,_.Ki,_.N7,d.Wk,h.l],styles:[".main_section[_ngcontent-%COMP%]{padding:1rem}.main_section[_ngcontent-%COMP%]   .boxes[_ngcontent-%COMP%]{padding:1rem;border:1px solid #f59f0a;border-radius:.75rem;background:#fff;margin-bottom:.75rem}.main_section[_ngcontent-%COMP%]   .boxes[_ngcontent-%COMP%]   .box_1[_ngcontent-%COMP%]{display:flex;gap:10px}.main_section[_ngcontent-%COMP%]   .boxes[_ngcontent-%COMP%]   .box_1[_ngcontent-%COMP%]   .sec_1[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{padding:.5rem;background:#f59f0a1a;border-radius:.75rem;width:1.25rem;height:1.25rem}.main_section[_ngcontent-%COMP%]   .boxes[_ngcontent-%COMP%]   .box_1[_ngcontent-%COMP%]   .sec_2[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{font-size:.875rem;line-height:1.25rem;font-weight:600}.main_section[_ngcontent-%COMP%]   .boxes[_ngcontent-%COMP%]   .box_1[_ngcontent-%COMP%]   .sec_2[_ngcontent-%COMP%]   .from[_ngcontent-%COMP%], .main_section[_ngcontent-%COMP%]   .boxes[_ngcontent-%COMP%]   .box_1[_ngcontent-%COMP%]   .sec_2[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:.75rem;line-height:1rem;margin-top:.25rem;color:#6b7280}.main_section[_ngcontent-%COMP%]   .boxes[_ngcontent-%COMP%]   .box_1[_ngcontent-%COMP%]   .sec_2[_ngcontent-%COMP%]   .count_status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:.5rem}.main_section[_ngcontent-%COMP%]   .boxes[_ngcontent-%COMP%]   .box_1[_ngcontent-%COMP%]   .sec_2[_ngcontent-%COMP%]   .count_status[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]{font-weight:600;font-size:.75rem;line-height:1rem;padding:.125rem .625rem;border-radius:9999px;align-items:center;display:inline-flex;border:1px solid var(--border-col)}.main_section[_ngcontent-%COMP%]   .boxes[_ngcontent-%COMP%]   .box_1[_ngcontent-%COMP%]   .sec_2[_ngcontent-%COMP%]   .count_status[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{color:#f59f0a;font-weight:600;font-size:.75rem;line-height:1rem;padding:.125rem .625rem;background-color:#f59f0a1a;border:1px solid #f59f0a;border-radius:9999px;align-items:center;display:inline-flex}.main_section[_ngcontent-%COMP%]   .books_list[_ngcontent-%COMP%]   .boxes_item[_ngcontent-%COMP%]{padding:1rem;margin-bottom:.75rem;background:#fff;border-radius:.75rem}.main_section[_ngcontent-%COMP%]   .books_list[_ngcontent-%COMP%]   .boxes_item[_ngcontent-%COMP%]   .book_name[_ngcontent-%COMP%]{font-weight:600;font-size:.875rem;line-height:1.25rem;margin-bottom:7px}.main_section[_ngcontent-%COMP%]   .books_list[_ngcontent-%COMP%]   .boxes_item[_ngcontent-%COMP%]   .sub_title[_ngcontent-%COMP%]{color:#6b7280;font-size:.75rem;line-height:1rem}.main_section[_ngcontent-%COMP%]   .books_list[_ngcontent-%COMP%]   .boxes_item[_ngcontent-%COMP%]   .cost_inputs[_ngcontent-%COMP%]{margin-top:.75rem;display:grid;grid-template-columns:repeat(2,minmax(0,1fr));width:100%;gap:.75rem}.main_section[_ngcontent-%COMP%]   .books_list[_ngcontent-%COMP%]   .boxes_item[_ngcontent-%COMP%]   .cost_inputs[_ngcontent-%COMP%]   .system_quantity[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .main_section[_ngcontent-%COMP%]   .books_list[_ngcontent-%COMP%]   .boxes_item[_ngcontent-%COMP%]   .cost_inputs[_ngcontent-%COMP%]   .physical_quantity[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#6b7280;font-weight:600;font-size:.75rem;line-height:1rem}.main_section[_ngcontent-%COMP%]   .books_list[_ngcontent-%COMP%]   .boxes_item[_ngcontent-%COMP%]   .cost_inputs[_ngcontent-%COMP%]   .system_quantity[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .main_section[_ngcontent-%COMP%]   .books_list[_ngcontent-%COMP%]   .boxes_item[_ngcontent-%COMP%]   .cost_inputs[_ngcontent-%COMP%]   .physical_quantity[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.5rem .75rem;background-color:#f0f2f4;margin-top:.25rem;border-radius:.75rem;border:unset!important;font-size:14px}.main_section[_ngcontent-%COMP%]   .books_list[_ngcontent-%COMP%]   .boxes_item[_ngcontent-%COMP%]   .cost_inputs[_ngcontent-%COMP%]   .system_quantity[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .main_section[_ngcontent-%COMP%]   .books_list[_ngcontent-%COMP%]   .boxes_item[_ngcontent-%COMP%]   .cost_inputs[_ngcontent-%COMP%]   .physical_quantity[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:1px solid var(--primary-color)}.main_section[_ngcontent-%COMP%]   .books_list[_ngcontent-%COMP%]   .boxes_item[_ngcontent-%COMP%]   .variance[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#6b7280;font-weight:600;font-size:.75rem;line-height:1rem}.main_section[_ngcontent-%COMP%]   .books_list[_ngcontent-%COMP%]   .boxes_item[_ngcontent-%COMP%]   .variance[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.5rem .75rem;background-color:#f0f2f4;margin-top:.25rem;border-radius:.75rem;border:unset!important;font-size:14px}.main_section[_ngcontent-%COMP%]   .books_list[_ngcontent-%COMP%]   .boxes_item[_ngcontent-%COMP%]   .variance[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:1px solid var(--primary-color)}.save_btn[_ngcontent-%COMP%]{padding:.75rem}.save_btn[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 2rem;--padding-end: 2rem;--padding-top: .75rem;--padding-bottom: .75rem;width:100%;font-size:.875rem;line-height:1.25rem;font-weight:600;--border-radius: calc(.75rem - 2px) }.save_btn[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:1rem}.save_btn[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:nth-child(1){margin-bottom:10px}.save_btn[_ngcontent-%COMP%]   .wrong_transfer[_ngcontent-%COMP%]{--background: #f6f7f9;border:1px solid #ef4343;color:#ef4343;border-radius:calc(.75rem - 2px)}"]}))}return s(),i})()}];let b=(()=>{var s;class i{static#t=s=()=>(this.\u0275fac=function(n){return new(n||i)},this.\u0275mod=t.$C({type:i}),this.\u0275inj=r.G2t({imports:[d.iI.forChild(O),d.iI]}))}return s(),i})();var y=c(5553);let k=(()=>{var s;class i{static#t=s=()=>(this.\u0275fac=function(n){return new(n||i)},this.\u0275mod=t.$C({type:i}),this.\u0275inj=r.G2t({imports:[m.MD,g.YN,_.bv,b,y.h]}))}return s(),i})()}}]);
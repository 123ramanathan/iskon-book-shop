<app-header [home]="true"></app-header>

<ion-content [fullscreen]="true" style="--background: #f6f7f9;">

  <ion-refresher slot="fixed" [pullFactor]="0.5" [pullMin]="100" [pullMax]="200" (ionRefresh)="handleRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>

  <div class="main_section" *ngIf="report_details">

    <div class="header_content">
      <h2 class="m-0">Reports & Analytics</h2>
      <p class="m-0">View your store performance</p>
    </div>

    <div class="today_summary" *ngIf="report_details.today_summary">
      <h3 class="m-0">Today's Summary</h3>
      <div class="section_2">
        <div class="sec_1">
          <p class="m-0">{{report_details.today_summary.total_sales}}</p>
          <p class="m-0">Total Sales</p>
        </div>
        <div class="sec_2">
          <p class="m-0">{{db.formatCurrency(report_details.today_summary.revenue)}}</p>
          <p class="m-0">Revenue</p>
        </div>
      </div>
    </div>

    <div class="payment_methods" *ngIf="report_details.payment_methods && report_details.payment_methods.length > 0">
      <h3 class="m-0">Payment Methods</h3>
      <div class="types_sec">
        <div class="secs" *ngFor="let item of report_details.payment_methods">
          <p class="m-0 type">{{item.method}}</p>
          <div class="cost_sec">
            <p class="m-0 transaction">{{item.count}} transactions</p>
            <p class="m-0 amount">{{db.formatCurrency(item.amount)}}</p>
          </div>
        </div>
      </div>
    </div>

    <div class="top_selling_books" *ngIf="report_details.top_selling_books && report_details.top_selling_books.length > 0">
      <h3 class="m-0">Top Selling Books</h3>
      <div class="books_sec">

        <div class="book_list" *ngFor="let item of report_details.top_selling_books">
          <div class="sec_1">
            <p class="m-0 book_name">{{item.item_name}}</p>
            <p class="m-0 sold">{{item.qty}} units sold</p>
          </div>
          <div class="sec_2">
            <p class="m-0 amount">{{db.formatCurrency(item.amount)}}</p>
          </div>
        </div>
        
      </div>
    </div>

    <div class="this_week" *ngIf="false">
      <h3 class="m-0">This Week</h3>

      <div class="types">
        <div class="sec_1">
          <div class="sales_icon">
            <ion-icon src="/assets/icon/report-sales.svg"></ion-icon>
          </div>
          <div>
            <p class="m-0 sec1_p1">156</p>
            <p class="m-0 sec1_p2">Sales</p>
          </div>
        </div>
        <div class="sec_2">
          <div class="revenue_icon">
            <ion-icon src="/assets/icon/revenue.svg"></ion-icon>
          </div>
          <div>
            <p class="m-0 sec2_p1">â‚¹78,540</p>
            <p class="m-0 sec2_p2">Revenue</p>
          </div>
        </div>
      </div>
    </div>

  </div>

</ion-content>

<app-header [home]="false" [title]="'Transfer Receipt'"></app-header>

<ion-content [fullscreen]="true" style="--background: #f6f7f9;">

  <ion-refresher slot="fixed" [pullFactor]="0.5" [pullMin]="100" [pullMax]="200" (ionRefresh)="handleRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  
  <div class="main_section">

    <div class="stock_boxes">
      <div class="boxes">
        <div class="box_1">
          <div class="sec_1">
            <ion-icon src="/assets/icon/receipt-items-pending.svg"></ion-icon>
          </div>
          <div class="sec_2" *ngIf="stock_details">
            <p class="m-0 id">{{stock_details.transfer_receipt_id}}</p>
            <!-- <p class="m-0 from">From: {{stock_details.from_warehouse}}</p> -->
            <p class="m-0 date">Date: {{stock_details.posting_date}}</p>
            <div class="count_status">
              <p class="m-0 items">{{stock_details.total_items}} Items</p>
              <p class="m-0 status">{{stock_details.status}}</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="books_list" *ngIf="stock_entry_list && stock_entry_list.length > 0">
      <div *ngFor="let item of stock_entry_list" class="boxes_item">
        <div>
          <h3 class="m-0 book_name">{{item.item_name}}</h3>
          <p class="m-0 sub_title">{{item.item_code}}</p>
        </div>
        <div class="cost_inputs mb-10">
          <div class="system_quantity">
            <label>System Quantity</label>
            <input type="number" readonly placeholder="System Quantity" [(ngModel)]="item.system_qty">
          </div>
          <div class="physical_quantity">
            <label>Physical Quantity</label>
            <input type="number" placeholder="Physical Quantity" (change)="fetch_variance(item)" [(ngModel)]="item.physical_qty">
          </div>
        </div>
        <div class="variance">
          <label>Variance</label>
          <input type="number" placeholder="Variance" [(ngModel)]="item.variance">
        </div>
      </div>
    </div>

  </div>

  <div class="save_btn">
    <ion-button fill="clear" (click)="saveReceipt()"><ion-icon class="white" name="checkmark-circle-outline"></ion-icon>Confirm Receipt</ion-button>
    <ion-button class="wrong_transfer" [routerLink]="'/wrong-receipt/' + router_name" fill="clear"><ion-icon name="warning-outline"></ion-icon>Report Wrong Transfer</ion-button>
  </div>

</ion-content>
